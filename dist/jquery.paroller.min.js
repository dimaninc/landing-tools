!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t(window.Zepto||window.jQuery||window.$||require("jquery")):t(window.Zepto||window.jQuery||window.$)}(function(w){"use strict";var o={factor:0,type:"background",direction:"vertical"};function n(t,i){this.element=t,this.$element=w(t),this.$window=w(window),this.$viewport=w(this.$element.data("paroller-viewport")||this.$element),this.options=w.extend(!0,{},o,i),this.init()}n.prototype={init:function(){var t=this;this._updatePosition(),this.$window.on("resize.paroller load.paroller",function(){t._updatePosition()}),this.$window.on("scroll.paroller",function(){t._updateScrollPosition()})},_updatePosition:function(){var t=this.$window.scrollTop(),i=this.$window.height(),o=this.$window.height(),e=this.$element.offset().top,n=this.$element.outerHeight(),r=this.$element.data("paroller-factor"),a=this.$element.data("paroller-type"),s=this.$element.data("paroller-direction"),l=r||this.options.factor,h=a||this.options.type,f=s||this.options.direction;if("background"===h){var d=Math.round((e-t)*l);"vertical"===f?this._verticalBPosition(n/2+d):"horizontal"===f&&this._horizontalBPosition(d)}else if("foreground"===h&&t<o){var p=Math.round((e-i/2+n-t)*l);"vertical"===f?this._verticalTransform(p):"horizontal"===f&&this._horizontalTransform(p)}},_updateScrollPosition:function(){var t=this.$window.scrollTop(),i=this.$window.height(),o=t+i,e=w(document).height(),n=this.$viewport.offset().top,r=n+this.$viewport.outerHeight(),a=this.$element.offset().top,s=this.$element.outerHeight(),l=this.$element.data("paroller-factor"),h=this.$element.data("paroller-type"),f=this.$element.data("paroller-direction"),d=l||this.options.factor,p=h||this.options.type,c=f||this.options.direction;if(!(t<r&&n<o))return!1;if("background"===p){var u=Math.round((a-t)*d);"vertical"===c?this._verticalBPosition(u):"horizontal"===c&&this._horizontalBPosition(u)}else if("foreground"===p&&t<e){var m=Math.round((a-i/2+s-t)*d);"vertical"===c?this._verticalTransform(m):"horizontal"===c&&this._horizontalTransform(m)}},_verticalBPosition:function(t){return this.$element.css({"background-position":"center "+-t+"px"})},_horizontalBPosition:function(t){return this.$element.css({"background-position":-t+"px center"})},_verticalTransform:function(t){return this.$element.css({"-webkit-transform":"translate3d(0, "+t+"px, 0)","-moz-transform":"translate3d(0, "+t+"px, 0)",transform:"translate3d(0, "+t+"px, 0)",transition:"transform linear","will-change":"transform"})},_horizontalTransform:function(t){return this.$element.css({"-webkit-transform":"translate3d("+t+"px, 0, 0)","-moz-transform":"translate3d("+t+"px, 0, 0)",transform:"translate3d("+t+"px, 0, 0)",transition:"transform linear","will-change":"transform"})},destroy:function(t){t||this.$element.removeData("_paroller"),this.$element.off(".paroller")},reinitialize:function(t){this.destroy(!0),this.options=w.extend(!0,{},this.options,t),this.init()},reinit:function(t){this.reinitialize()}},w.fn.paroller=function(i){var o=arguments,t=this.is("[data-paroller-factor]")?this:this.find("[data-paroller-factor]");if(void 0===i||"object"==typeof i)return t.each(function(){w.data(this,"_paroller")||w.data(this,"_paroller",new n(this,i))}),this;if("string"==typeof i&&"_"!==i[0]&&"init"!==i){var e=void 0;return t.each(function(){var t=w.data(this,"_paroller");t instanceof n&&"function"==typeof t[i]&&(e=t[i].apply(t,Array.prototype.slice.call(o,1)))}),void 0!==e?e:this}}});